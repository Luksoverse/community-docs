"use strict";(self.webpackChunkcommunity_docs=self.webpackChunkcommunity_docs||[]).push([[2974],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>p});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),d=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=d(n),p=r,k=m["".concat(s,".").concat(p)]||m[p]||u[p]||a;return n?o.createElement(k,l(l({ref:t},c),{},{components:n})):o.createElement(k,l({ref:t},c))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,l=new Array(a);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var d=2;d<a;d++)l[d]=n[d];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},447:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var o=n(7462),r=(n(7294),n(3905));const a={title:"Node Uninstall",sidebar_position:7},l="Node Uninstall",i={unversionedId:"community-guides/node-uninstall",id:"community-guides/node-uninstall",title:"Node Uninstall",description:"Guide by Felix Hildebrandt",source:"@site/docs/community-guides/node-uninstall.md",sourceDirName:"community-guides",slug:"/community-guides/node-uninstall",permalink:"/docs/community-guides/node-uninstall",draft:!1,editUrl:"https://github.com/Luksoverse/community-docs/tree/main/packages/create-docusaurus/templates/shared/docs/community-guides/node-uninstall.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"Node Uninstall",sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"SSH Security",permalink:"/docs/community-guides/ssh-security"},next:{title:"Luksoverse KeyGen guide",permalink:"/docs/community-guides/mainnet-info"}},s={},d=[{value:"LUKSO CLI Uninstall",id:"lukso-cli-uninstall",level:2},{value:"1. Stop the Node",id:"1-stop-the-node",level:3},{value:"2. Remove LUKSO CLI",id:"2-remove-lukso-cli",level:3},{value:"Remove Monitoring",id:"remove-monitoring",level:4},{value:"3. Remove Docker Data",id:"3-remove-docker-data",level:3},{value:"Option A: Only Remove Node Data",id:"option-a-only-remove-node-data",level:4},{value:"Option B: Prune Docker",id:"option-b-prune-docker",level:4},{value:"4. Backup and Folder Removal",id:"4-backup-and-folder-removal",level:3}],c={toc:d};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"node-uninstall"},"Node Uninstall"),(0,r.kt)("p",null,"Guide by ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/fhildeb"},"Felix Hildebrandt")),(0,r.kt)("h2",{id:"lukso-cli-uninstall"},"LUKSO CLI Uninstall"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This guide is suited for L16 nodes running a docker installation up to the ",(0,r.kt)("inlineCode",{parentName:"p"},"LUKSO CLI Version 4.9.0"),". If you are using an newer version, paths and tools might not fully align. Use the uninstall commands at own risk.")),(0,r.kt)("p",null,"The LUKSO CLI is installed within ",(0,r.kt)("inlineCode",{parentName:"p"},"/usr/local/bin/lukso"),", and links to Docker. You will have to remove:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"CLI Tool"),(0,r.kt)("li",{parentName:"ul"},"Docker Containers & Images"),(0,r.kt)("li",{parentName:"ul"},"Node folder")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Commands may need admin permission")),(0,r.kt)("h3",{id:"1-stop-the-node"},"1. Stop the Node"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ lukso network stop validator\n$ lukso network stop\n")),(0,r.kt)("h3",{id:"2-remove-lukso-cli"},"2. Remove LUKSO CLI"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ cd /usr/local/bin\n$ ls -al\n$ rm -rf lukso\n")),(0,r.kt)("h4",{id:"remove-monitoring"},"Remove Monitoring"),(0,r.kt)("p",null,"If you want to fully remove all node data and monitoring software, you can also stop and remove Prometheus, Grafana and all tools that were needed for them."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Stop monitoring software\n$ systemctl stop grafana-server\n$ systemctl stop prometheus\n\n# Remove packages installed with apt-get\n$ apt remove apt-transport-https software-properties-common wget grafana-enterprise\n\n# Remove binaries\n$ cd /usr/local/bin\n$ rm -rf node_exporter prometheus promtool blackbox_exporter\n\n# Remove libraries\n$ cd /var/lib\n$ rm -rf prometheus grafana\n$ cd /lib/systemd/system\n$ rm-rf grafana-server.service grafana-server.service.old\n\n# Remove config and databases\n$ cd /etc\n$ rm -rf prometheus grafana blackbox_exporter\n$ cd /etc/systemd/system\n$ rm -rf prometheus.service grafana.service blackbox_exporter.service\n\n")),(0,r.kt)("h3",{id:"3-remove-docker-data"},"3. Remove Docker Data"),(0,r.kt)("p",null,"There are two different ways of removing docker data: soft-reset or hard-reset. If you are not running anything else on the node, just prune your docker system to remove all data. You can also uninstall docker-compose and docker after. If you have other software using docker, just remove the node-specific data."),(0,r.kt)("h4",{id:"option-a-only-remove-node-data"},"Option A: Only Remove Node Data"),(0,r.kt)("p",null,"Get all the ",(0,r.kt)("inlineCode",{parentName:"p"},"CONTAINER_IDs")," of the containers named like:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-geth/geth:")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-prysm/beacon:")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-prysm/validator:"))),(0,r.kt)("p",null,"They have to be remove one by one."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ docker ps -a\n$ docker rm CONTAINER_ID\n")),(0,r.kt)("p",null,"Get all the ",(0,r.kt)("inlineCode",{parentName:"p"},"IMAGE_IDs")," of the images named like:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-geth/geth")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-prysm/beacon")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"docker-prysm/validator"))),(0,r.kt)("p",null,"They have to be remove one by one."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ docker images -a\n$ docker rmi IMAGE_ID\n")),(0,r.kt)("h4",{id:"option-b-prune-docker"},"Option B: Prune Docker"),(0,r.kt)("p",null,"If you installed docker via ",(0,r.kt)("a",{parentName:"p",href:"https://get.docker.com/"},"get.docker.com")," and used curl scripts to install the docker-compose add-on as described by the LUKSO documentation, the following commands will match the installation folders and can be removed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Prune Docker Data\n$ docker system prune -a\n\n# Remove Docker Compose\n$ rm -rf /usr/local/bin/docker-compose\n\n# Remove Docker\n$ rm -rf /var/lib/docker\n$ rm -rf /etc/docker\n")),(0,r.kt)("h3",{id:"4-backup-and-folder-removal"},"4. Backup and Folder Removal"),(0,r.kt)("p",null,"Now you can backup your private keys and remove the node folder with all its contents. Exchange ",(0,r.kt)("inlineCode",{parentName:"p"},"NODE_FOLDER")," with your node folder name. If you do not want to create a backup just delete the node folder without further redo."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ cd ~\n$ mkdir l16-key-backup\n$ cd NODE_FOLDER\n$ mv keystore ~/l16-key-backup/keystore\n$ mv transaction_wallet ~/l16-key-backup/transaction_wallet\n$ cd ..\n$ rm -rf NODE_FOLDER\n")))}u.isMDXComponent=!0}}]);