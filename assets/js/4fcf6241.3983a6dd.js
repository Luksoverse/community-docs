"use strict";(self.webpackChunkcommunity_docs=self.webpackChunkcommunity_docs||[]).push([[30],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,l(l({ref:t},c),{},{components:n})):a.createElement(h,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294),r=n(6010);const o="tabItem_Ymn6";function l(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,l),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(7462),r=n(7294),o=n(6010),l=n(2466),i=n(6775),s=n(1980),p=n(7392),c=n(12);function u(e){return function(e){var t;return(null==(t=r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))?void 0:t.filter(Boolean))??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function d(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??u(n);return function(e){const t=(0,p.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function g(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=d(e),[l,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[s,p]=h({queryString:n,groupId:a}),[u,g]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,c.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),k=(()=>{const e=s??u;return m({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{k&&i(k)}),[k]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),p(e),g(e)}),[p,g,o]),tabValues:o}}var k=n(2389);const f="tabList__CuJ",b="tabItem_LNqP";function v(e){let{className:t,block:n,selectedValue:i,selectValue:s,tabValues:p}=e;const c=[],{blockElementScrollPositionUntilNextRender:u}=(0,l.o5)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),a=p[n].value;a!==i&&(u(t),s(a))},m=e=>{var t;let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},p.map((e=>{let{value:t,label:n,attributes:l}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>c.push(e),onKeyDown:m,onClick:d},l,{className:(0,o.Z)("tabs__item",b,null==l?void 0:l.className,{"tabs__item--active":i===t})}),n??t)})))}function y(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function N(e){const t=g(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",f)},r.createElement(v,(0,a.Z)({},e,t)),r.createElement(y,(0,a.Z)({},e,t)))}function w(e){const t=(0,k.Z)();return r.createElement(N,(0,a.Z)({key:String(t)},e))}},5039:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));n(4866),n(5162);const o={title:"Part 5 - Monitoring",sidebar_position:5},l="Part 5 - Monitoring",i={unversionedId:"Community-Archive/node-guide/monitoring",id:"Community-Archive/node-guide/monitoring",title:"Part 5 - Monitoring",description:"This guide will show you step by step how to do monitoring on your machine by giving you the instructions to install and configure all the tools needed.",source:"@site/docs/Community-Archive/node-guide/5-monitoring.md",sourceDirName:"Community-Archive/node-guide",slug:"/Community-Archive/node-guide/monitoring",permalink:"/docs/Community-Archive/node-guide/monitoring",draft:!1,editUrl:"https://github.com/Luksoverse/community-docs/tree/main/packages/create-docusaurus/templates/shared/docs/Community-Archive/node-guide/5-monitoring.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Part 5 - Monitoring",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Part 4 - LUKSO Network Setup",permalink:"/docs/Community-Archive/node-guide/network-setup"},next:{title:"Guide Updates",permalink:"/docs/Community-Archive/node-guide/updates"}},s={},p=[{value:"Why would you want to do monitoring?",id:"why-would-you-want-to-do-monitoring",level:2},{value:"Overview",id:"overview",level:2},{value:"Step 1 - Node Exporter",id:"step-1---node-exporter",level:2},{value:"1.1 - Add a user",id:"11---add-a-user",level:3},{value:"1.2 - Install",id:"12---install",level:3},{value:"Download Node Exporter",id:"download-node-exporter",level:4},{value:"Extract the archive",id:"extract-the-archive",level:4},{value:"Copy the binary to the following location and set ownership",id:"copy-the-binary-to-the-following-location-and-set-ownership",level:4},{value:"Clean up",id:"clean-up",level:4},{value:"1.3 - Configure the system service",id:"13---configure-the-system-service",level:3},{value:"Create a node explorer configuration file.",id:"create-a-node-explorer-configuration-file",level:4},{value:"Add the following to the file, then save and quit.",id:"add-the-following-to-the-file-then-save-and-quit",level:4},{value:"Save and quit",id:"save-and-quit",level:4},{value:"1.4 - Enable the service",id:"14---enable-the-service",level:3},{value:"Refresh systemd to reflect the changes",id:"refresh-systemd-to-reflect-the-changes",level:4},{value:"Start and check the status of the service",id:"start-and-check-the-status-of-the-service",level:4},{value:"Set Node Exporter to start on boot",id:"set-node-exporter-to-start-on-boot",level:4},{value:"Step 2 - Json Exporter",id:"step-2---json-exporter",level:2},{value:"2.1 - Prerequisites",id:"21---prerequisites",level:3},{value:"Install Go:",id:"install-go",level:4},{value:"Install Make:",id:"install-make",level:4},{value:"2.2 - Add user",id:"22---add-user",level:3},{value:"2.3 - Install",id:"23---install",level:3},{value:"2.4 - Configure",id:"24---configure",level:3},{value:"Create directory and set ownership",id:"create-directory-and-set-ownership",level:4},{value:"Setup <code>LYX</code> token price:",id:"setup-lyx-token-price",level:4},{value:"Change ownership of configuration file:",id:"change-ownership-of-configuration-file",level:4},{value:"- Configure service",id:"--configure-service",level:4},{value:"2.5 - Enable service:",id:"25---enable-service",level:3},{value:"Step 3 - Blackbox Exporter",id:"step-3---blackbox-exporter",level:2},{value:"3.1 - Add a user for the service",id:"31---add-a-user-for-the-service",level:3},{value:"3.2 - Install",id:"32---install",level:3},{value:"3.3 - Enable ping permissions",id:"33---enable-ping-permissions",level:3},{value:"3.4 - Configure the exporter",id:"34---configure-the-exporter",level:3},{value:"Create directory and assign ownership",id:"create-directory-and-assign-ownership",level:4},{value:"Open configuration file",id:"open-configuration-file",level:4},{value:"Copy/paste the contents below to the configuration file",id:"copypaste-the-contents-below-to-the-configuration-file",level:4},{value:"Change ownership of configuration file:",id:"change-ownership-of-configuration-file-1",level:4},{value:"3.5 - Configure service",id:"35---configure-service",level:3},{value:"Open the configuration file",id:"open-the-configuration-file",level:4},{value:"Copy/paste the contents below to the configuration file",id:"copypaste-the-contents-below-to-the-configuration-file-1",level:4},{value:"3.6 - Enable the service",id:"36---enable-the-service",level:3},{value:"Step 4 - Prometheus",id:"step-4---prometheus",level:2},{value:"4.1 - Add a user",id:"41---add-a-user",level:3},{value:"4.2 - Install",id:"42---install",level:3},{value:"4.3 - Configure",id:"43---configure",level:3},{value:"Open the configuration file.",id:"open-the-configuration-file-1",level:4},{value:"Copy/paste the contents below to the configuration file.",id:"copypaste-the-contents-below-to-the-configuration-file-2",level:4},{value:"Prepare data directory for prometheus:",id:"prepare-data-directory-for-prometheus",level:4},{value:"4.4 - Open port to access metrics.",id:"44---open-port-to-access-metrics",level:3},{value:"Open the port",id:"open-the-port",level:4},{value:"4.5 - Configure services",id:"45---configure-services",level:3},{value:"Open the configuration file",id:"open-the-configuration-file-2",level:4},{value:"Copy/paste the contents below to the configuration file",id:"copypaste-the-contents-below-to-the-configuration-file-3",level:4},{value:"Step 5 - Grafana",id:"step-5---grafana",level:2},{value:"5.1 - Install",id:"51---install",level:3},{value:"5.2 - Configure Service",id:"52---configure-service",level:3},{value:"Open the configuration file",id:"open-the-configuration-file-3",level:4},{value:"Clear the existing contents of the file",id:"clear-the-existing-contents-of-the-file",level:4},{value:"Copy/paste the contents below to the empty configuration file.",id:"copypaste-the-contents-below-to-the-empty-configuration-file",level:4},{value:"5.3 - Enable service",id:"53---enable-service",level:3},{value:"5.4 - Open port to access metrics.",id:"54---open-port-to-access-metrics",level:3},{value:"5.5 - Configure Dashboard",id:"55---configure-dashboard",level:3},{value:"Data Source",id:"data-source",level:4},{value:"Install Dashboard",id:"install-dashboard",level:4},{value:"5.6 - Enable Alerts",id:"56---enable-alerts",level:3},{value:"5.7 - Enable Image Alerts",id:"57---enable-image-alerts",level:3},{value:"5.8 - Enable Constant Notifications",id:"58---enable-constant-notifications",level:3},{value:"Permanent Alerts",id:"permanent-alerts",level:4}],c={toc:p};function u(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"part-5---monitoring"},"Part 5 - Monitoring"),(0,r.kt)("p",null,"This guide will show you step by step how to do monitoring on your machine by giving you the instructions to install and configure all the tools needed."),(0,r.kt)("h2",{id:"why-would-you-want-to-do-monitoring"},"Why would you want to do monitoring?"),(0,r.kt)("p",null,"Here are some good reasons why you might want to do monitoring on your machine:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Information visibility"),": You want to expose and be able to easily see your machine details."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Issue tracking and debugging"),": You want to be able to inspect what happened in the past and see clearly how your machine reacted to some event."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Issue prevention"),": You want to be able to see potential resources exhaustion ahead of time.")),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"We will install 5 tools with this guide:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://prometheus.io/docs/guides/node-exporter/"},"Node Exporter")," - monitors the node machine's performance")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/prometheus-community/json_exporter"},"JSON Exporter")," - scrapes LUKSO price information from CoinGecko.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/prometheus/blackbox_exporter"},"Blackbox Exporter")," - monitors ping time between the node machine and two DNS servers.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://prometheus.io/docs/introduction/overview/"},"Prometheus")," - collects metrics from the node, JSON and Blackbox exporters.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://grafana.com/oss/grafana/"},"Grafana"),' - queries Prometheus for metrics, displays the information on "dashboards," and provides alerts when data is abnormal.'))),(0,r.kt)("p",null,"Connect to your node machine and proceed to the next step."),(0,r.kt)("h2",{id:"step-1---node-exporter"},"Step 1 - Node Exporter"),(0,r.kt)("h3",{id:"11---add-a-user"},"1.1 - Add a user"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo adduser --system node_exporter --group --no-create-home\n")),(0,r.kt)("h3",{id:"12---install"},"1.2 - Install"),(0,r.kt)("h4",{id:"download-node-exporter"},"Download Node Exporter"),(0,r.kt)("p",null,"Check ",(0,r.kt)("a",{parentName:"p",href:"https://prometheus.io/download/#node_exporter"},"https://prometheus.io/download/#node_exporter")," to make sure 1.5.0 is the latest stable. As of this writing."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"wget https://github.com/prometheus/node_exporter/releases/download/v1.5.0/node_exporter-1.5.0.linux-amd64.tar.gz\n")),(0,r.kt)("h4",{id:"extract-the-archive"},"Extract the archive"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"tar xzvf node_exporter-1.5.0.linux-amd64.tar.gz\n")),(0,r.kt)("h4",{id:"copy-the-binary-to-the-following-location-and-set-ownership"},"Copy the binary to the following location and set ownership"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo cp node_exporter-1.5.0.linux-amd64/node_exporter /usr/local/bin/\nsudo chown node_exporter:node_exporter /usr/local/bin/node_exporter\n")),(0,r.kt)("h4",{id:"clean-up"},"Clean up"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rm",metastring:"node_exporter-1.5.0.linux-amd64.tar.gz","node_exporter-1.5.0.linux-amd64.tar.gz":!0},"rm -rf node_exporter-1.5.0.linux-amd64\n")),(0,r.kt)("h3",{id:"13---configure-the-system-service"},"1.3 - Configure the system service"),(0,r.kt)("h4",{id:"create-a-node-explorer-configuration-file"},"Create a node explorer configuration file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo nano /etc/systemd/system/node_exporter.service\n")),(0,r.kt)("h4",{id:"add-the-following-to-the-file-then-save-and-quit"},"Add the following to the file, then save and quit."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell",metastring:'title="contents of /etc/systemd/system/node_exporter.service"',title:'"contents',of:!0,'/etc/systemd/system/node_exporter.service"':!0},"[Unit]\nDescription=Node Exporter\n\n[Service]\nType=simple\nRestart=always\nRestartSec=5\nUser=node_exporter\nExecStart=/usr/local/bin/node_exporter\n\n[Install]\nWantedBy=multi-user.target\n")),(0,r.kt)("h4",{id:"save-and-quit"},"Save and quit"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ctrl+x"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"y"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"enter")),(0,r.kt)("h3",{id:"14---enable-the-service"},"1.4 - Enable the service"),(0,r.kt)("h4",{id:"refresh-systemd-to-reflect-the-changes"},"Refresh systemd to reflect the changes"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo systemctl daemon-reload\n")),(0,r.kt)("h4",{id:"start-and-check-the-status-of-the-service"},"Start and check the status of the service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo systemctl start node_exporter\nsudo systemctl is-active node_exporter\n")),(0,r.kt)("p",null,"The output should be ",(0,r.kt)("inlineCode",{parentName:"p"},"active"),"."),(0,r.kt)("h4",{id:"set-node-exporter-to-start-on-boot"},"Set Node Exporter to start on boot"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo systemctl enable node_exporter\n")),(0,r.kt)("h2",{id:"step-2---json-exporter"},"Step 2 - Json Exporter"),(0,r.kt)("h3",{id:"21---prerequisites"},"2.1 - Prerequisites"),(0,r.kt)("h4",{id:"install-go"},"Install Go:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"wget https://dl.google.com/go/go1.20.3.linux-amd64.tar.gz\nsudo tar -xvf go1.20.3.linux-amd64.tar.gz\nrm go1.20.3.linux-amd64.tar.gz\nsudo mv go /usr/local/go-1.20.3\nsudo ln -sf /usr/local/go-1.20.3/bin/go /usr/bin/go\ngo version\n")),(0,r.kt)("h4",{id:"install-make"},"Install Make:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo apt install make\n")),(0,r.kt)("h3",{id:"22---add-user"},"2.2 - Add user"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo adduser --system json_exporter --group --no-create-home\n")),(0,r.kt)("h3",{id:"23---install"},"2.3 - Install"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"cd\ngit clone https://github.com/prometheus-community/json_exporter.git\ncd json_exporter\nsudo make build\nsudo cp json_exporter /usr/local/bin/\nsudo chown json_exporter:json_exporter /usr/local/bin/json_exporter\ncd\nrm -rf json_exporter\n")),(0,r.kt)("h3",{id:"24---configure"},"2.4 - Configure"),(0,r.kt)("h4",{id:"create-directory-and-set-ownership"},"Create directory and set ownership"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo mkdir /etc/json_exporter\nsudo chown json_exporter:json_exporter /etc/json_exporter\n")),(0,r.kt)("h4",{id:"setup-lyx-token-price"},"Setup ",(0,r.kt)("inlineCode",{parentName:"h4"},"LYX")," token price:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo nano /etc/json_exporter/json_exporter.yml\n")),(0,r.kt)("p",null,"Copy/paste the content of configuration file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'modules:\n  default:\n    metrics:\n    - name: lyxusd\n      path: "{.lukso-token.usd}"\n      help: Lukso (LYX) price in USD\n')),(0,r.kt)("p",null,"Save and quit\n",(0,r.kt)("inlineCode",{parentName:"p"},"ctrl+x"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"y"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"enter")),(0,r.kt)("h4",{id:"change-ownership-of-configuration-file"},"Change ownership of configuration file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo chown json_exporter:json_exporter /etc/json_exporter/json_exporter.yml\n")),(0,r.kt)("h4",{id:"--configure-service"},"- Configure service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo nano /etc/systemd/system/json_exporter.service\n")),(0,r.kt)("p",null,"Copy/paste the content of configuration file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[Unit]\nDescription=JSON Exporter\n\n[Service]\nType=simple\nRestart=always\nRestartSec=5\nUser=json_exporter\nExecStart=/usr/local/bin/json_exporter --config.file /etc/json_exporter/json_exporter.yml\n\n[Install]\nWantedBy=multi-user.target\n")),(0,r.kt)("p",null,"Save and quit\n",(0,r.kt)("inlineCode",{parentName:"p"},"ctrl+x"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"y"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"enter")),(0,r.kt)("h3",{id:"25---enable-service"},"2.5 - Enable service:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo systemctl daemon-reload\nsudo systemctl start json_exporter\nsudo systemctl enable json_exporter\n")),(0,r.kt)("h2",{id:"step-3---blackbox-exporter"},"Step 3 - Blackbox Exporter"),(0,r.kt)("p",null,"Blackbox exporter pings google and cloudflare to track latency."),(0,r.kt)("h3",{id:"31---add-a-user-for-the-service"},"3.1 - Add a user for the service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo adduser --system blackbox_exporter --group --no-create-home\n")),(0,r.kt)("h3",{id:"32---install"},"3.2 - Install"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"cd\nwget https://github.com/prometheus/blackbox_exporter/releases/download/v0.22.0/blackbox_exporter-0.22.0.linux-amd64.tar.gz\ntar xvzf blackbox_exporter-0.22.0.linux-amd64.tar.gz\nsudo cp blackbox_exporter-0.22.0.linux-amd64/blackbox_exporter /usr/local/bin/\nsudo chown blackbox_exporter:blackbox_exporter /usr/local/bin/blackbox_exporter\nsudo chmod 755 /usr/local/bin/blackbox_exporter\nrm blackbox_exporter-0.22.0.linux-amd64.tar.gz\nrm -rf blackbox_exporter-0.22.0.linux-amd64\n")),(0,r.kt)("h3",{id:"33---enable-ping-permissions"},"3.3 - Enable ping permissions"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo setcap cap_net_raw+ep /usr/local/bin/blackbox_exporter\n")),(0,r.kt)("h3",{id:"34---configure-the-exporter"},"3.4 - Configure the exporter"),(0,r.kt)("h4",{id:"create-directory-and-assign-ownership"},"Create directory and assign ownership"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo mkdir /etc/blackbox_exporter\nsudo chown blackbox_exporter:blackbox_exporter /etc/blackbox_exporter\n")),(0,r.kt)("h4",{id:"open-configuration-file"},"Open configuration file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo nano /etc/blackbox_exporter/blackbox.yml\n")),(0,r.kt)("h4",{id:"copypaste-the-contents-below-to-the-configuration-file"},"Copy/paste the contents below to the configuration file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title=/etc/blackbox_exporter/blackbox.yml",title:"/etc/blackbox_exporter/blackbox.yml"},"modules:\n        icmp:\n                prober: icmp\n                timeout: 10s\n                icmp:\n                        preferred_ip_protocol: ipv4\n")),(0,r.kt)("p",null,"Save and quit\n",(0,r.kt)("inlineCode",{parentName:"p"},"ctrl+x"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"y"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"enter")),(0,r.kt)("h4",{id:"change-ownership-of-configuration-file-1"},"Change ownership of configuration file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo chown blackbox_exporter:blackbox_exporter /etc/blackbox_exporter/blackbox.yml\n")),(0,r.kt)("h3",{id:"35---configure-service"},"3.5 - Configure service"),(0,r.kt)("h4",{id:"open-the-configuration-file"},"Open the configuration file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo nano /etc/systemd/system/blackbox_exporter.service\n")),(0,r.kt)("h4",{id:"copypaste-the-contents-below-to-the-configuration-file-1"},"Copy/paste the contents below to the configuration file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title=/etc/systemd/system/blackbox_exporter.service",title:"/etc/systemd/system/blackbox_exporter.service"},"[Unit]\nDescription=Blackbox Exporter\n\n[Service]\nType=simple\nRestart=always\nRestartSec=5\nUser=blackbox_exporter\nExecStart=/usr/local/bin/blackbox_exporter --config.file /etc/blackbox_exporter/blackbox.yml\n\n[Install]\nWantedBy=multi-user.target\n")),(0,r.kt)("p",null,"Save and quit\n",(0,r.kt)("inlineCode",{parentName:"p"},"ctrl+x"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"y"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"enter")),(0,r.kt)("h3",{id:"36---enable-the-service"},"3.6 - Enable the service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo systemctl daemon-reload\nsudo systemctl start blackbox_exporter\nsudo systemctl enable blackbox_exporter\n")),(0,r.kt)("h2",{id:"step-4---prometheus"},"Step 4 - Prometheus"),(0,r.kt)("h3",{id:"41---add-a-user"},"4.1 - Add a user"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo adduser --system prometheus --group --no-create-home\n")),(0,r.kt)("h3",{id:"42---install"},"4.2 - Install"),(0,r.kt)("p",null,"As of this writing, the current long term support (LTS) version of Prometheus is 2.37.8"),(0,r.kt)("p",null,"Confirm the current ",(0,r.kt)("strong",{parentName:"p"},"LTS")," version for ",(0,r.kt)("inlineCode",{parentName:"p"},"linux-amd64")," ",(0,r.kt)("a",{parentName:"p",href:"https://prometheus.io/download/"},"here")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Only use the LTS version")),(0,r.kt)("p",null,"If a newer version exists, replace all occurrences of ",(0,r.kt)("inlineCode",{parentName:"p"},"2.37.8")," with the new version number in the code box below."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cd\nwget https://github.com/prometheus/prometheus/releases/download/v2.37.8/prometheus-2.37.8.linux-amd64.tar.gz\ntar xzvf prometheus-2.37.8.linux-amd64.tar.gz\ncd prometheus-2.37.8.linux-amd64\nsudo cp promtool /usr/local/bin/\nsudo cp prometheus /usr/local/bin/\nsudo chown root:root /usr/local/bin/promtool /usr/local/bin/prometheus\nsudo chmod 755 /usr/local/bin/promtool /usr/local/bin/prometheus\ncd\nrm prometheus-2.37.8.linux-amd64.tar.gz\nrm -rf prometheus-2.37.8.linux-amd64\n")),(0,r.kt)("h3",{id:"43---configure"},"4.3 - Configure"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo mkdir -p /etc/prometheus/console_libraries /etc/prometheus/consoles /etc/prometheus/files_sd /etc/prometheus/rules /etc/prometheus/rules.d\n")),(0,r.kt)("h4",{id:"open-the-configuration-file-1"},"Open the configuration file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo nano /etc/prometheus/prometheus.yml\n")),(0,r.kt)("h4",{id:"copypaste-the-contents-below-to-the-configuration-file-2"},"Copy/paste the contents below to the configuration file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"global:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n\nscrape_configs:\n  - job_name: 'prometheus'\n    scrape_interval: 5s\n    static_configs:\n      - targets: ['127.0.0.1:9090']\n  - job_name: 'beacon node'\n    scrape_interval: 5s\n    static_configs:\n      - targets: ['127.0.0.1:8080']\n  - job_name: 'node_exporter'\n    scrape_interval: 5s\n    static_configs:\n      - targets: ['127.0.0.1:9100']\n  - job_name: 'validator'\n    scrape_interval: 5s\n    static_configs:\n      - targets: ['127.0.0.1:8081']\n  - job_name: 'ping_google'\n    metrics_path: /probe\n    params:\n      module: [icmp]\n    static_configs:\n      - targets:\n        - 8.8.8.8\n    relabel_configs:\n      - source_labels: [__address__]\n        target_label: __param_target\n      - source_labels: [__param_target]\n        target_label: instance\n      - target_label: __address__\n        replacement: 127.0.0.1:9115  # The blackbox exporter's real hostname:port.\n  - job_name: 'ping_cloudflare'\n    metrics_path: /probe\n    params:\n      module: [icmp]\n    static_configs:\n      - targets:\n        - 1.1.1.1\n    relabel_configs:\n      - source_labels: [__address__]\n        target_label: __param_target\n      - source_labels: [__param_target]\n        target_label: instance\n      - target_label: __address__\n        replacement: 127.0.0.1:9115  # The blackbox exporter's real hostname:port.\n  - job_name: json_exporter\n    static_configs:\n    - targets:\n      - 127.0.0.1:7979\n  - job_name: json\n    metrics_path: /probe\n    static_configs:\n    - targets:\n      - https://api.coingecko.com/api/v3/simple/price?ids=lukso-token&vs_currencies=usd\n    relabel_configs:\n    - source_labels: [__address__]\n      target_label: __param_target\n    - source_labels: [__param_target]\n      target_label: instance\n    - target_label: __address__\n      replacement: 127.0.0.1:7979\n")),(0,r.kt)("p",null,"Save and quit\n",(0,r.kt)("inlineCode",{parentName:"p"},"ctrl+x"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"y"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"enter")),(0,r.kt)("h4",{id:"prepare-data-directory-for-prometheus"},"Prepare data directory for prometheus:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo chown -R prometheus:prometheus /etc/prometheus\nsudo mkdir /var/lib/prometheus\nsudo chown prometheus:prometheus /var/lib/prometheus\nsudo chmod 755 /var/lib/prometheus\n")),(0,r.kt)("h3",{id:"44---open-port-to-access-metrics"},"4.4 - Open port to access metrics."),(0,r.kt)("p",null,"Opening this port allows access to prometheus metrics in the web browser of you personal computer while connected to the local network. Opening a port in this way poses a slight security risk. For an alternative see ",(0,r.kt)("strong",{parentName:"p"},"coming soon")),(0,r.kt)("h4",{id:"open-the-port"},"Open the port"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo ufw allow 9090/tcp\n")),(0,r.kt)("h3",{id:"45---configure-services"},"4.5 - Configure services"),(0,r.kt)("h4",{id:"open-the-configuration-file-2"},"Open the configuration file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo nano /etc/systemd/system/prometheus.service\n")),(0,r.kt)("h4",{id:"copypaste-the-contents-below-to-the-configuration-file-3"},"Copy/paste the contents below to the configuration file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell=",metastring:"title=/etc/systemd/system/prometheus.service",title:"/etc/systemd/system/prometheus.service"},"[Unit]\nDescription=Prometheus\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nUser=prometheus\nGroup=prometheus\nType=simple\nRestart=always\nRestartSec=5\nExecStart=/usr/local/bin/prometheus \\\n    --config.file /etc/prometheus/prometheus.yml \\\n    --storage.tsdb.path /var/lib/prometheus/ \\\n    --storage.tsdb.retention.time=31d \\\n    --web.console.templates=/etc/prometheus/consoles \\\n    --web.console.libraries=/etc/prometheus/console_libraries\nExecReload=/bin/kill -HUP $MAINPID\n\n[Install]\nWantedBy=multi-user.target\n")),(0,r.kt)("p",null,"Save and quit\n",(0,r.kt)("inlineCode",{parentName:"p"},"ctrl+x"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"y"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"enter")),(0,r.kt)("p",null,"Enable service:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo systemctl daemon-reload\nsudo systemctl start prometheus\nsudo systemctl enable prometheus\n")),(0,r.kt)("h2",{id:"step-5---grafana"},"Step 5 - Grafana"),(0,r.kt)("h3",{id:"51---install"},"5.1 - Install"),(0,r.kt)("p",null,"You will have to answer a couple prompts during the installation."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},'cd\nsudo apt-get install -y apt-transport-https\nsudo apt-get install -y software-properties-common wget\nwget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -\nsudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"\nsudo apt-get update\nsudo apt-get install grafana-enterprise\n')),(0,r.kt)("h3",{id:"52---configure-service"},"5.2 - Configure Service"),(0,r.kt)("h4",{id:"open-the-configuration-file-3"},"Open the configuration file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo nano /lib/systemd/system/grafana-server.service\n")),(0,r.kt)("h4",{id:"clear-the-existing-contents-of-the-file"},"Clear the existing contents of the file"),(0,r.kt)("p",null,"Ensure the cursor is at the top left of the file."),(0,r.kt)("p",null,"Press ",(0,r.kt)("inlineCode",{parentName:"p"},"crtl")," + ",(0,r.kt)("inlineCode",{parentName:"p"},"6")," to set a mark"),(0,r.kt)("p",null,"Press ",(0,r.kt)("inlineCode",{parentName:"p"},"alt")," + ",(0,r.kt)("inlineCode",{parentName:"p"},"shift")," + ",(0,r.kt)("inlineCode",{parentName:"p"},"t")," to clear"),(0,r.kt)("h4",{id:"copypaste-the-contents-below-to-the-empty-configuration-file"},"Copy/paste the contents below to the empty configuration file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[Unit]\nDescription=Grafana instance\nDocumentation=http://docs.grafana.org\nWants=network-online.target\nAfter=network-online.target\nAfter=postgresql.service mariadb.service mysql.service\n\n[Service]\nEnvironmentFile=/etc/default/grafana-server\nUser=grafana\nGroup=grafana\nType=simple\nRestart=on-failure\nWorkingDirectory=/usr/share/grafana\nRuntimeDirectory=grafana\nRuntimeDirectoryMode=0750\nExecStart=/usr/sbin/grafana-server \\\n                            --config=${CONF_FILE} \\\n                            --pidfile=${PID_FILE_DIR}/grafana-server.pid \\\n                            --packaging=deb \\\n                            cfg:default.paths.logs=${LOG_DIR} \\\n                            cfg:default.paths.data=${DATA_DIR} \\\n                            cfg:default.paths.plugins=${PLUGINS_DIR} \\\n                            cfg:default.paths.provisioning=${PROVISIONING_CFG_DIR}\n\n\nLimitNOFILE=10000\nTimeoutStopSec=20\nCapabilityBoundingSet=\nDeviceAllow=\nLockPersonality=true\nMemoryDenyWriteExecute=false\nNoNewPrivileges=true\nPrivateDevices=true\nPrivateTmp=true\nPrivateUsers=true\nProtectClock=true\nProtectControlGroups=true\nProtectHome=true\nProtectHostname=true\nProtectKernelLogs=true\nProtectKernelModules=true\nProtectKernelTunables=true\nProtectProc=invisible\nProtectSystem=full\nRemoveIPC=true\nRestrictAddressFamilies=AF_INET AF_INET6 AF_UNIX\nRestrictNamespaces=true\nRestrictRealtime=true\nRestrictSUIDSGID=true\nSystemCallArchitectures=native\nUMask=0027\n\n[Install]\nAlias=grafana.service\nWantedBy=multi-user.target\n")),(0,r.kt)("p",null,"Save and quit\n",(0,r.kt)("inlineCode",{parentName:"p"},"ctrl+x"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"y"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"enter")),(0,r.kt)("h3",{id:"53---enable-service"},"5.3 - Enable service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo systemctl daemon-reload\nsudo systemctl start grafana-server\nsudo systemctl enable grafana-server\n")),(0,r.kt)("h3",{id:"54---open-port-to-access-metrics"},"5.4 - Open port to access metrics."),(0,r.kt)("p",null,"Opening this port allows access to grafana's dashboard in the web browser of you personal computer while connected to the local network."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell="},"sudo ufw allow 3000/tcp\n")),(0,r.kt)("h3",{id:"55---configure-dashboard"},"5.5 - Configure Dashboard"),(0,r.kt)("p",null,"Login to grafana by opening a web browser ",(0,r.kt)("inlineCode",{parentName:"p"},"http://<node-ip>:3000"),". Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"<node-ip>")," with IP of your node machine. This is the same IP used to ssh."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell=",metastring:'title="Default credentials"',title:'"Default','credentials"':!0},"username: admin\npassword: admin\n")),(0,r.kt)("p",null,"Set a new secure (long) password when prompted by grafana."),(0,r.kt)("h4",{id:"data-source"},"Data Source"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"On the left-hand menu, hover over the gear menu and click on ",(0,r.kt)("inlineCode",{parentName:"li"},"Data Sources")),(0,r.kt)("li",{parentName:"ol"},"Then click on the Add Data Source button"),(0,r.kt)("li",{parentName:"ol"},"Hover over the Prometheus card on screen, then click on the Select button"),(0,r.kt)("li",{parentName:"ol"},"Enter ",(0,r.kt)("inlineCode",{parentName:"li"},"http://127.0.0.1:9090/")," into the URL field, then click Save & Test")),(0,r.kt)("h4",{id:"install-dashboard"},"Install Dashboard"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Follow ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/Luksoverse/docs.luksoverse.io/blob/main/grafana/dashboard.json"},"this link")," to the JSON file we will use to configure the dashboard."),(0,r.kt)("li",{parentName:"ol"},'Click the "copy raw contents" button (next to the trash can icon)')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"test",src:n(5843).Z,width:"948",height:"672"})),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Return to the Grafana windows in your web browser")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click the plus symbol icon on the top right, then click on Import")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Rigth click and select paste in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Import via panel json")," text box on the screen"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"test",src:n(9037).Z,width:"589",height:"673"})),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Click the Load button"),(0,r.kt)("li",{parentName:"ol"},"Click the Import button")),(0,r.kt)("h3",{id:"56---enable-alerts"},"5.6 - Enable Alerts"),(0,r.kt)("p",null,"Grafana is configured to monitor the following:"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(8063).Z,width:"889",height:"233"})),(0,r.kt)("p",null,"When abnormal reading are detected Grafana can send alerts through various types of channels, such as Discord, Telegram, Email, etc."),(0,r.kt)("p",null,"The following will guide will configure Grafana notification for Telegram. It is convenient to have a text editor open to temporarily store information needed for these steps."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a ",(0,r.kt)("a",{parentName:"li",href:"https://telegram.org/"},"Telegram")," account if needed. You may use the web-based version of Telegram or install the Desktop version."),(0,r.kt)("li",{parentName:"ol"},"Create a new Telegram bot with BotFather. Click on this link ",(0,r.kt)("a",{parentName:"li",href:"https://t.me/botfather"},"https://t.me/botfather")," and allow the website to open Telegram."),(0,r.kt)("li",{parentName:"ol"},"A BotFather channel will open. Type ",(0,r.kt)("inlineCode",{parentName:"li"},"/newbot")," in the message line and click the send button.")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(3160).Z,width:"839",height:"182"})),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Choose a full name for your bot."),(0,r.kt)("li",{parentName:"ol"},"Choose a user name for your bot. The name must end in ",(0,r.kt)("inlineCode",{parentName:"li"},"bot")),(0,r.kt)("li",{parentName:"ol"},"A message will appear with information about your bot. Highlight and copy the API token, then paste into your text editor.")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(2684).Z,width:"1266",height:"383"})),(0,r.kt)("ol",{start:7},(0,r.kt)("li",{parentName:"ol"},"Open the Telegram menu, create a new group, and choose a name for the group."),(0,r.kt)("li",{parentName:"ol"},"Add your bot to the group. Type the exact ",(0,r.kt)("strong",{parentName:"li"},"user name")," your chose for your bot in step 5. Select the user when it appears in the list, the click create.")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(1917).Z,width:"426",height:"265"})),(0,r.kt)("ol",{start:9},(0,r.kt)("li",{parentName:"ol"},"In the newly created group, type and send at least one message; it can be anything."),(0,r.kt)("li",{parentName:"ol"},"Copy the link below and paste to your text editor. Replace ",(0,r.kt)("inlineCode",{parentName:"li"},"<YOUR BOT API TOKEN with>")," the token ID from step 6.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://api.telegram.org/bot<YOUR BOT API TOKEN>/getUpdates\n")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(3889).Z,width:"1699",height:"504"})),(0,r.kt)("ol",{start:11},(0,r.kt)("li",{parentName:"ol"},"We now need to find your ",(0,r.kt)("inlineCode",{parentName:"li"},"chat id")," number. Copy the link you just edited into a web browser.")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(2254).Z,width:"1699",height:"504"})),(0,r.kt)("ol",{start:12},(0,r.kt)("li",{parentName:"ol"},"Look for text that says ",(0,r.kt)("inlineCode",{parentName:"li"},'{"id"}:')," then copy/paster the number that follows to your text editor.")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(8706).Z,width:"1690",height:"351"})),(0,r.kt)("ol",{start:13},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Return to Grafana")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"On the left-hand menu, click the alarm icon")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click the ",(0,r.kt)("inlineCode",{parentName:"p"},"Notification channels")," tab at the top")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("inlineCode",{parentName:"p"},"Add channel"),"\n",(0,r.kt)("img",{src:n(8561).Z,width:"1438",height:"429"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Fill in the following information"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Name:")," it can be anything"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Type:")," Telegram"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"BOT API Token:")," copy/paste from text editor"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Chat ID:")," copy/paste from text editor"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(172).Z,width:"777",height:"177"})),(0,r.kt)("ol",{start:18},(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("inlineCode",{parentName:"li"},"send test"),". If successful, you will see a new message in Telegram from the Full Name you chose in step 4.")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(9181).Z,width:"1654",height:"810"})),(0,r.kt)("ol",{start:19},(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("inlineCode",{parentName:"li"},"Save")),(0,r.kt)("li",{parentName:"ol"},"Return to the LUKSO dashboard by clicking the Grafana icon and then Lukso under the dashboard section.")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(7772).Z,width:"923",height:"725"})),(0,r.kt)("ol",{start:21},(0,r.kt)("li",{parentName:"ol"},"Scroll down on a dashboard to ",(0,r.kt)("inlineCode",{parentName:"li"},"Alerts")," section"),(0,r.kt)("li",{parentName:"ol"},"Select each alert and click ",(0,r.kt)("inlineCode",{parentName:"li"},"Edit")),(0,r.kt)("li",{parentName:"ol"},"In ",(0,r.kt)("inlineCode",{parentName:"li"},"Alert")," tab, select notifications ",(0,r.kt)("inlineCode",{parentName:"li"},"send to")," and choose the name you chose in step 17"),(0,r.kt)("li",{parentName:"ol"},"Click the back arrow on the top left of the Grafana screen"),(0,r.kt)("li",{parentName:"ol"},"Repeat for ",(0,r.kt)("strong",{parentName:"li"},"each alert"))),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(2230).Z,width:"1699",height:"940"})),(0,r.kt)("h3",{id:"57---enable-image-alerts"},"5.7 - Enable Image Alerts"),(0,r.kt)("p",null,"If you want pictures or graphs added to your regular notifications, you can install the Grafana Image Renderer. It can be installed via the built-in Grafana CLI and the Grafana Server just needs a restart for it to show up."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Install image renderer\ngrafana-cli plugins install grafana-image-renderer\n\n# Restart Grafana\nsudo systemctl restart grafana-server\n\n# Check status\nsudo systemctl status grafana-server\n")),(0,r.kt)("p",null,"After Grafana is up and running again, go to the Grafana webpage, click on the notification icon on the left menu bar and move to the ",(0,r.kt)("inlineCode",{parentName:"p"},"notification channels")," on the second tab in the middle of the page."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open the notification channel of your LUKSO node"),(0,r.kt)("li",{parentName:"ol"},"Activate image rendering by enabling ",(0,r.kt)("inlineCode",{parentName:"li"},"Include Image")),(0,r.kt)("li",{parentName:"ol"},"Save the options")),(0,r.kt)("p",null,"All notifications you've set up will automatically send graphs along the way."),(0,r.kt)("h3",{id:"58---enable-constant-notifications"},"5.8 - Enable Constant Notifications"),(0,r.kt)("p",null,"Within the notification dashboard of the node, you can also activate ",(0,r.kt)("inlineCode",{parentName:"p"},"send reminders"),". Alert reminders are sent after notification rules are evaluated and a certain amount of time has passed."),(0,r.kt)("p",null,"By setting it to 1h, you will get a notification every hour if a critical error or status has still not changed. This is helpful if you want constant notifications of the node status."),(0,r.kt)("h4",{id:"permanent-alerts"},"Permanent Alerts"),(0,r.kt)("p",null,"After enabling it on the notification dashboard, you could head over to your node's dashboard and clone or create a new notification. For it to show permanent notifications at a constant rate, you can set a metric so high that is never supposed to be reached. For instance: If you want hourly updates on the participation rate, you can set the alert for under 100% participation. In this case, you would get a graph of the network participation once an hour."),(0,r.kt)("hr",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/lykhonis/lukso-node-guide#prometheus"},"Vlad's Guide")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.coincashew.com/coins/overview-eth/guide-or-how-to-setup-a-validator-on-eth2-mainnet/part-i-installation/monitoring-your-validator-with-grafana-and-prometheus?q=grafana"},"CoinCashew")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://ethereum.org/en/developers/tutorials/monitoring-geth-with-influxdb-and-grafana/"},"Ethereum.org")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.prylabs.network/docs/prysm-usage/monitoring/grafana-dashboard"},"Prysm Docs")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/remyroy/ethstaker/blob/main/monitoring.md"},"Ethstaker"))))}u.isMDXComponent=!0},5843:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.5-dashboard-s2-28a71bb2acceeb2fd529b2799904226a.svg"},9037:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.5-dashboard-s5-316fa95b31ddb3dc05b18331ee45aa18.png"},8063:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-00-5bb98bfc60815f03dc02d2204f105148.png"},3160:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-03-3f6bf3d9e7f189f158d990979be570f4.png"},2684:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-06-5f7d7f60d0604a6ff264c4a39de541be.png"},1917:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-08-089b954c7e29557e5ad38a77c14c1aef.png"},3889:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-10-a10aa874b90c93e05dc6a617dfb158f1.gif"},2254:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-11-07db1ac301faad1886fff7f1deacf95d.gif"},8706:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-12-1c7268d07f90cd749244885bcf807d25.gif"},8561:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-16-fc2a8f29ae71994f387f90604718eb17.png"},172:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-17-7b7cac223c3f572f64b53debafe749d3.png"},9181:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-18-22ebefe0340ec17d6e91f95b0ee3e9f4.png"},7772:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-20-72f8069005d0d1f31c0a11b5c26306d4.png"},2230:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5.6-24-f9abd24a715ff124e50d29bc03cfd925.gif"}}]);