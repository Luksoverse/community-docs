"use strict";(self.webpackChunkcommunity_docs=self.webpackChunkcommunity_docs||[]).push([[7883],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var o=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,s=function(e,t){if(null==e)return{};var n,o,s={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var i=o.createContext({}),u=function(e){var t=o.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,s=e.mdxType,r=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),g=s,k=p["".concat(i,".").concat(g)]||p[g]||d[g]||r;return n?o.createElement(k,a(a({ref:t},c),{},{components:n})):o.createElement(k,a({ref:t},c))}));function g(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=n.length,a=new Array(r);a[0]=p;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:s,a[1]=l;for(var u=2;u<r;u++)a[u]=n[u];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},958:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var o=n(7462),s=(n(7294),n(3905));const r={},a="General Tooltips",l={unversionedId:"mainnet/complete-node-guide/tooltips/README",id:"mainnet/complete-node-guide/tooltips/README",title:"General Tooltips",description:"The following file features small help snippets in case there are any issues with the LUKSO CLI",source:"@site/docs/mainnet/complete-node-guide/10-tooltips/README.md",sourceDirName:"mainnet/complete-node-guide/10-tooltips",slug:"/mainnet/complete-node-guide/tooltips/",permalink:"/docs/mainnet/complete-node-guide/tooltips/",draft:!1,editUrl:"https://github.com/Luksoverse/community-docs/tree/main/packages/create-docusaurus/templates/shared/docs/mainnet/complete-node-guide/10-tooltips/README.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Tailscale Setup",permalink:"/docs/mainnet/complete-node-guide/external-access/tailscale-setup"},next:{title:"Validator Key Generation",permalink:"/docs/community-guides/validator-key-generation/"}},i={},u=[{value:"Node Update",id:"node-update",level:2},{value:"1. Update Software Packages",id:"1-update-software-packages",level:3},{value:"2. Update the LUKSO CLI and Clients",id:"2-update-the-lukso-cli-and-clients",level:3},{value:"Optional: Update Client Configs",id:"optional-update-client-configs",level:3},{value:"Prysm Changes",id:"prysm-changes",level:4},{value:"Erigon Changes",id:"erigon-changes",level:4},{value:"Teku Changes",id:"teku-changes",level:4},{value:"Lighthouse Changes",id:"lighthouse-changes",level:4},{value:"Optional: Remove Genesis Flags",id:"optional-remove-genesis-flags",level:3},{value:"3. Restart the Node",id:"3-restart-the-node",level:3},{value:"Scan for Warnings and Errors",id:"scan-for-warnings-and-errors",level:2},{value:"Downgrade or Change Client Versions",id:"downgrade-or-change-client-versions",level:2},{value:"Reset Blockchain State",id:"reset-blockchain-state",level:2},{value:"Restart Monitoring",id:"restart-monitoring",level:2}],c={toc:u};function d(e){let{components:t,...n}=e;return(0,s.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"general-tooltips"},"General Tooltips"),(0,s.kt)("p",null,"The following file features small help snippets in case there are any issues with the LUKSO CLI"),(0,s.kt)("h2",{id:"node-update"},"Node Update"),(0,s.kt)("p",null,"How to update your server, clients, and configs."),(0,s.kt)("h3",{id:"1-update-software-packages"},"1. Update Software Packages"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"# Update Package List\nsudo apt update\n\n# List Upgradable Packages\nsudo apt list --upgradable\n\n# Put Grafana Updates on Hold\nsudo apt-mark hold grafana\n\n# Stop Node with Automation\nsudo systemctl stop lukso-validator\n\n# Stop Node without Automation\n# cd <lukso-working directory>\n# lukso stop\n\n# Apply all software updates\nsudo apt upgrade\n# Choose to keep local SSH <OK>\n# Update outdated libraries <OK>\n\n# Kernel packages not updated automatically <OK>\n# Running packages not updated automatically <OK>\n\n# Reboot the System to update remaining packages\nsudo reboot\n")),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"You will be logged out of the machine and have to log back in using SSH")),(0,s.kt)("h3",{id:"2-update-the-lukso-cli-and-clients"},"2. Update the LUKSO CLI and Clients"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"# Get latest LUKSO CLI\nsudo curl https://install.lukso.network | sh\n\n# Move into the node directory\ncd <lukso-working-directory>\n\n# Ensure all client processes are stopped\nsudo pkill geth\nsudo pkill prysm\nsudo pkill validator\n# sudo pkill teku\n# sudo pkill lighthouse\n# sudo pkill erigon\n\n# Check your current client versions\ngeth --version\nprysm --version\n# lighthouse --version\n# teku --version\n# erigon --version\n\n# Update your clients\nsudo lukso update\n\n# Update the network configurations\nsudo lukso update configs\n\n# Check your new client versions\ngeth --version\nprysm --version\n# lighthouse --version\n# teku --version\n# erigon --version\n")),(0,s.kt)("h3",{id:"optional-update-client-configs"},"Optional: Update Client Configs"),(0,s.kt)("p",null,"If you update your network configs using ",(0,s.kt)("inlineCode",{parentName:"p"},"lukso init")," or ",(0,s.kt)("inlineCode",{parentName:"p"},"lukso update configs"),", ",(0,s.kt)("strong",{parentName:"p"},"none of your own configurations are overwritten"),":"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"sudo lukso init\nsudo lukso update configs\n")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"If you do ",(0,s.kt)("inlineCode",{parentName:"li"},"lukso update configs"),", only the files within the ",(0,s.kt)("inlineCode",{parentName:"li"},"/configs/<network>/shared")," folders will be updated."),(0,s.kt)("li",{parentName:"ul"},"If you do ",(0,s.kt)("inlineCode",{parentName:"li"},"lukso init"),", only missing ",(0,s.kt)("inlineCode",{parentName:"li"},"/configs/")," files will be added")),(0,s.kt)("p",null,"However, LUKSO recently introduced some optional changes to the client configurations. If you want, you can update them accordingly. However, this is not mandatory."),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Changes introduced since network launch in May 2023. Last checked on 1st March 2024")),(0,s.kt)("h4",{id:"prysm-changes"},"Prysm Changes"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"cd <lukso-working-directory>/configs/<network>\nvim prysm/prysm.yaml\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text"},"p2p-host-ip: '0.0.0.0'                      --\x3e removed on https://github.com/lukso-network/network-configs/pull/112/files\nmin-sync-peers: 1                           --\x3e updated on https://github.com/lukso-network/network-configs/pull/131/files\nminimum-peers-per-subnet: 1                 --\x3e updated on https://github.com/lukso-network/network-configs/pull/131/files\nblock-batch-limit: 512                      --\x3e removed on https://github.com/lukso-network/network-configs/pull/131/files\nblock-batch-limit-burst-factor: 10          --\x3e removed on https://github.com/lukso-network/network-configs/pull/131/files\ncontract-deployment-block: 0                --\x3e added on https://github.com/lukso-network/network-configs/pull/117/files\n")),(0,s.kt)("h4",{id:"erigon-changes"},"Erigon Changes"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"cd <lukso-working-directory>/configs/<network>\nvim erigon/erigon.toml\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text"},'"externalcl" = true                         --\x3e removed on https://github.com/lukso-network/network-configs/pull/115/files\n\n"snapshots" = false                         --\x3e added on https://github.com/lukso-network/network-configs/pull/115/files\n"prune" = "htc"                             --\x3e added on https://github.com/lukso-network/network-configs/pull/115/files\n"private.api.addr" = "127.0.0.1:9098"       --\x3e added on https://github.com/lukso-network/network-configs/pull/118/files\n\n"db.size.limit" = "8TB"                     --\x3e added on https://github.com/lukso-network/network-configs/pull/129/files\n\n')),(0,s.kt)("h4",{id:"teku-changes"},"Teku Changes"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"cd <lukso-working-directory>/configs/<network>\nvim teku/config.yaml\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text"},"MIN_EPOCHS_FOR_BLOCK_REQUESTS: 33024        --\x3e added on https://github.com/lukso-network/network-configs/pull/128/files\n")),(0,s.kt)("h4",{id:"lighthouse-changes"},"Lighthouse Changes"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"cd <lukso-working-directory>/configs/<network>\nvim lighthouse/lighthouse.toml\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text"},'http-address = "0.0.0.0"                    --\x3e removed on https://github.com/lukso-network/network-configs/pull/116/files\n\nmetrics-address = "0.0.0.0"                 --\x3e removed on https://github.com/lukso-network/network-configs/pull/116/files\nmetrics-allow-origin = "*"                  --\x3e removed on https://github.com/lukso-network/network-configs/pull/116/files\n\nmetrics = true                              --\x3e added on https://github.com/lukso-network/network-configs/pull/116/files\nmetrics-port=5057                           --\x3e added onhttps://github.com/lukso-network/network-configs/pull/116/files\n')),(0,s.kt)("h3",{id:"optional-remove-genesis-flags"},"Optional: Remove Genesis Flags"),(0,s.kt)("p",null,"In case you were a genesis validator using an automation script on your node, make sure to ",(0,s.kt)("strong",{parentName:"p"},"remove the following lines")," from your startup script:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"cd <lukso-working-directory>/static/\nsudo vim ./lukso_startup.sh\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text"},"        --genesis-json ./configs/mainnet/shared/genesis_42.json \\\n        --genesis-ssz ./configs/mainnet/shared/genesis_42.ssz \\\n")),(0,s.kt)("h3",{id:"3-restart-the-node"},"3. Restart the Node"),(0,s.kt)("p",null,"After all updates have been applied to configuration files and clients, you can restart your node."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},'## If you have automation, re-apply all rights to the service\nsudo chown -R lukso-validator-worker:lukso-validator-worker /home/<user-name>/<lukso-working-directory>\nsudo chown lukso-validator-worker:lukso-validator-worker /usr/local/bin/lukso\nsudo chmod -R 750 /home/<user-name>/<your-node-folder>\nsudo chmod 755 /home/<user-name>/<your-node-folder>\nsudo chmod 400 /home/<user-name>/<lukso-working-directory>/static/<your-generic-password-file>\nsudo chmod 500 /home/<user-name>/<lukso-working-directory>/static/lukso_startup.sh\n\n# Restart the Node Service with Automation\nsudo systemctl start lukso-validator\n\n# Restart Node Service without Automation\n# cd <lukso-working-directory>\n# lukso start --validator --transaction-fee-recipient "<your-fee-recipient-address>" --checkpoint-sync\n\n# Check if all clients are working\nsudo lukso status\n')),(0,s.kt)("h2",{id:"scan-for-warnings-and-errors"},"Scan for Warnings and Errors"),(0,s.kt)("p",null,"The logging commands of the LUKSO CLI can also be used to search the logging files for warnings or errors."),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Administrative rights are only needed if you are using secure service automation")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},'# Fetch all execution warnings\nsudo lukso logs execution | grep "warning"\n# Fetch all validator warnings\nsudo lukso logs validator | grep "warning"\n# Fetch all consensus warnings\nsudo lukso logs consensus | grep "warning"\n\n# Fetch all execution errors\nsudo lukso logs execution | grep "error"\n# Fetch all validator errors\nsudo lukso logs validator | grep "error"\n# Fetch all consensus errors\nsudo lukso logs consensus | grep "error"\n')),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"After executing the command, the terminal is waiting for an input to show the log file. You will have to press the ENTER key in order to see the related logs you searched for.")),(0,s.kt)("h2",{id:"downgrade-or-change-client-versions"},"Downgrade or Change Client Versions"),(0,s.kt)("p",null,"The client version can be changed manually, in case there are some issues with the data folder."),(0,s.kt)("p",null,"Custom client versions can be installed using the ",(0,s.kt)("inlineCode",{parentName:"p"},"lukso install")," command by providing specific flags. The command will still function as usual, giving you the option to choose your execution and consensus client; however, it continues to download the version that was defined by the flags. You can also add multiple flags to download a consensus and execution version simultaneously."),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"For Geth, you also have to provide the correct commit hash.")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"# Manually overwrite Geth Version\nlukso install --geth-tag v1.12\n# https://github.com/ethereum/go-ethereum/releases\nlukso install --geth-tag 1.12.2 --geth-commit-hash bed84606\n\n# Manually overwrite Prysm Version\n# https://github.com/prysmaticlabs/prysm/releases\nlukso install --prysm-tag v4.0.8\n\n# Manually overwrite Lighthouse Version\n# https://github.com/sigp/lighthouse/releases\nlukso install --lighthouse-tag v4.1.0\n\n# Manually overwrite Erigon Version\n# https://github.com/ledgerwatch/erigon/releases\nlukso install ---erigon-tag 2.52.1\n\n# Manually overwrite Teku Version\n# https://github.com/ConsenSys/teku/releases\nlukso install ---teku-tag v23.10.0\n")),(0,s.kt)("h2",{id:"reset-blockchain-state"},"Reset Blockchain State"),(0,s.kt)("p",null,"When updating execution client versions, you might run into errors with the existing state. To resolve issues, remove the data folder containing the blockchain database."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"# Move into the node directory\ncd <lukso-working-directory>\n\n# Remove blockchain data\nrm -rf <network>-data\n\n# Remove old logs\nrm -rf <network>-logs\n\n# Re-init the folder\nsudo lukso init\n")),(0,s.kt)("h2",{id:"restart-monitoring"},"Restart Monitoring"),(0,s.kt)("p",null,"Monitoring system services are restarting during boot time, however, it might happen that you have to manually restart or trigger them."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"# System & Hardware Metrics\nsudo systemctl restart node_exporter\n\n# LYX Price Metrics\nsudo systemctl restart json_exporter\n\n# Ping Metrics\nsudo systemctl restart blackbox_exporter\n\n# Node Client Metrics\nsudo systemctl restart prometheus\n\n# Grafana Dashboard\nsudo systemctl restart grafana-server\n")))}d.isMDXComponent=!0}}]);